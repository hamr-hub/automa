# 工作流录制功能测试指南

## 测试准备

1. 构建扩展:
```bash
npm run build
```

2. 在Chrome中加载扩展:
   - 打开 `chrome://extensions/`
   - 启用"开发者模式"
   - 点击"加载已解压的扩展程序"
   - 选择 `dist` 目录

## 测试用例

### 1. 启动录制测试

**步骤:**
1. 点击扩展图标打开popup
2. 点击"录制工作流"按钮 (录制图标)
3. 在弹出的对话框中输入工作流名称,如"测试录制"
4. 点击确认

**预期结果:**
- Popup关闭
- 页面左下角出现红色录制悬浮球
- 悬浮球显示录制中的动画效果
- 浏览器扩展图标显示"rec"徽章

### 2. 录制操作测试

**步骤:**
1. 在启动录制后,在页面上进行以下操作:
   - 点击链接跳转到新页面
   - 在输入框中输入文本
   - 点击按钮
   - 等待页面加载

**预期结果:**
- 录制悬浮球的角标数字随着操作增加
- 点击悬浮球展开后,能看到所有录制的操作列表
- 每个操作显示正确的图标和描述

### 3. 录制器UI测试

**步骤:**
1. 点击录制悬浮球展开录制器
2. 查看操作列表
3. 测试以下功能:
   - 上移操作
   - 下移操作
   - 删除操作
   - 清除所有操作

**预期结果:**
- 录制器正确展开,显示所有操作
- 操作列表可以滚动
- 上移/下移按钮正确禁用(第一项/最后一项)
- 删除操作后列表立即更新
- 清除所有操作需要确认

### 4. 保存工作流测试

**步骤:**
1. 录制几个操作
2. 点击"保存工作流"按钮

**预期结果:**
- 录制停止
- 录制器消失
- 工作流保存到数据库
- 徽章清除
- 可以在dashboard中看到新创建的工作流

### 5. 取消录制测试

**步骤:**
1. 开始录制并录制几个操作
2. 点击"取消录制"按钮
3. 在确认对话框中点击确认

**预期结果:**
- 显示确认对话框
- 录制停止
- 录制器消失
- 操作不会保存
- 徽章清除

### 6. 跨页面录制测试

**步骤:**
1. 开始录制
2. 点击链接跳转到新页面
3. 在新页面继续操作
4. 切换回原来的标签页

**预期结果:**
- 录制器在所有页面正常显示
- 跨页面操作都被正确录制
- 标签页切换操作被记录

### 7. 操作编辑测试

**步骤:**
1. 录制5个操作
2. 展开录制器
3. 将第3个操作上移到第1个位置
4. 删除第2个操作
5. 保存工作流

**预期结果:**
- 操作顺序正确调整
- 删除的操作不在列表中
- 保存后的工作流包含正确的操作顺序

### 8. 性能测试

**步骤:**
1. 录制大量操作(超过50个)
2. 查看录制器的性能表现

**预期结果:**
- 录制器流畅显示
- 操作列表可以正常滚动
- 没有明显卡顿

## 已知问题

### 需要注意的点:
1. 录制器目前固定在左下角,如果与页面内容冲突,用户需要手动调整
2. 部分特殊页面(如chrome://*)无法注入录制脚本
3. iframe内的操作可能需要特殊处理

## 回归测试

确保以下现有功能仍然正常:
- [ ] 从dashboard的/recording页面启动录制(保留的旧功能)
- [ ] 元素选择器功能
- [ ] 从已有工作流录制
- [ ] 录制数据的持久化

## 测试报告

请在测试后填写:

**测试日期:** ________________

**测试环境:**
- 操作系统: ________________
- 浏览器版本: ________________
- 扩展版本: ________________

**测试结果:**

| 测试用例 | 通过/失败 | 备注 |
|---------|----------|------|
| 1. 启动录制 | ⬜ | |
| 2. 录制操作 | ⬜ | |
| 3. 录制器UI | ⬜ | |
| 4. 保存工作流 | ⬜ | |
| 5. 取消录制 | ⬜ | |
| 6. 跨页面录制 | ⬜ | |
| 7. 操作编辑 | ⬜ | |
| 8. 性能测试 | ⬜ | |

**发现的问题:**
1. 
2. 
3. 

**建议改进:**
1. 
2. 
3.
